<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>折腾记录 on シャロン</title><link>https://sheronw.xyz/tags/%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/</link><description>Recent content in 折腾记录 on シャロン</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Mon, 04 Jan 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://sheronw.xyz/tags/%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/index.xml" rel="self" type="application/rss+xml"/><item><title>Assign a Subdomain to Elastic Beanstalk and Enable HTTPS</title><link>https://sheronw.xyz/posts/2021-01-04-subdomain-https-for-eb/</link><pubDate>Mon, 04 Jan 2021 00:00:00 +0000</pubDate><guid>https://sheronw.xyz/posts/2021-01-04-subdomain-https-for-eb/</guid><description>&lt;blockquote&gt;
&lt;p&gt;To enable HTTPS (easily), make sure you created one Elastic Beanstalk environment with Load Balancer option.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="create-hosted-zone"&gt;Create Hosted Zone&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;find Route 53 in AWS console&lt;/li&gt;
&lt;li&gt;choose &lt;code&gt;hosted zones&lt;/code&gt; on the left&lt;/li&gt;
&lt;li&gt;click &lt;code&gt;create hosted zone&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;write your &lt;code&gt;subdomain.example.com&lt;/code&gt; as domain name, choose &lt;code&gt;public hosted zone&lt;/code&gt; and then click &lt;code&gt;create hosted zone&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="edit-ttl-optional-for-testing"&gt;Edit TTL (optional for testing)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;find the NS record in this hosted zone, select and click &lt;code&gt;edit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;change TTL to some value like 900 (15 min), by default the value is 172800 (2 days)&lt;/li&gt;
&lt;/ul&gt;
&lt;!--truncate--&gt;
&lt;h2 id="add-alias-resource-record"&gt;Add Alias Resource Record&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;click &lt;code&gt;create record&lt;/code&gt; in this hosted zone&lt;/li&gt;
&lt;li&gt;just leave blank for &lt;code&gt;record name&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;enable &lt;code&gt;alias&lt;/code&gt; and assign &lt;code&gt;route traffic to&lt;/code&gt; as your elastic beanstalk application&lt;/li&gt;
&lt;li&gt;click &lt;code&gt;create&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="add-ns-records-for-the-subdomain"&gt;Add NS Records for the Subdomain&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;go to your domain provider and find the place to add records, for example, in Google Domains, go to &lt;code&gt;DNS&lt;/code&gt; and find &lt;code&gt;custom resource records&lt;/code&gt; section&lt;/li&gt;
&lt;li&gt;copy and paste the NS record in the hosted zone that you created just now, for example, in Google Domains, name should be &lt;code&gt;subdomain&lt;/code&gt; (some providers use &lt;code&gt;subdomain.example.com&lt;/code&gt;), type should be &lt;code&gt;NS&lt;/code&gt; and data should be the values from NS record in the hosted zone, there might be several lines of value and you could use the smaller &lt;code&gt;+&lt;/code&gt; sign to add them in one record&lt;/li&gt;
&lt;li&gt;could also set TTL to 900&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="change-ttl-back-optional"&gt;Change TTL back (optional)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;if you lowered TTL for testing, don&amp;rsquo;t forget to change them back to default value&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="request-a-certificate"&gt;Request a Certificate&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;go to Certificate Manager in aws&lt;/li&gt;
&lt;li&gt;click &lt;code&gt;request a certificate&lt;/code&gt;, choose &lt;code&gt;request a public certificate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;type your &lt;code&gt;subdomain.example.com&lt;/code&gt; and then choose DNS validation&lt;/li&gt;
&lt;li&gt;choose to import the CNAME record into Route 53 automatically&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="load-balancer-configuration"&gt;Load Balancer Configuration&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;make sure you created an environment with load balancer&lt;/li&gt;
&lt;li&gt;go to your elastic beanstalk environment&lt;/li&gt;
&lt;li&gt;click &lt;code&gt;configuration&lt;/code&gt; on the left side bar&lt;/li&gt;
&lt;li&gt;find &lt;code&gt;load balancer&lt;/code&gt; and edit&lt;/li&gt;
&lt;li&gt;click &lt;code&gt;add listener&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;port is &lt;code&gt;443&lt;/code&gt;, protocol is &lt;code&gt;HTTPS&lt;/code&gt; and choose the previous created certificate as your ssl certificate&lt;/li&gt;
&lt;li&gt;click &lt;code&gt;add&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>IMGUI 中文支持方案</title><link>https://sheronw.xyz/posts/2020-07-01-imgui-chinese/</link><pubDate>Wed, 01 Jul 2020 00:00:00 +0000</pubDate><guid>https://sheronw.xyz/posts/2020-07-01-imgui-chinese/</guid><description>&lt;p&gt;没学过 c++，单纯想头铁汉化个东西，就查资料折腾了一下，这里做一个小的总结。如果有更好的方案请指正。&lt;/p&gt;
&lt;h2 id="加载字体"&gt;加载字体&lt;/h2&gt;
&lt;p&gt;首先需要加载支持中文的字体。
网上最多的解决方案是读取外部的&lt;code&gt;.ttf/.otf&lt;/code&gt;字体，亲测可用。但需要用户的目录读取权限，而且可能出现字体不存在的情况。&lt;/p&gt;
&lt;p&gt;对于源码内嵌字体，IMGUI 的作者其实也给出了一个解决方案：&lt;a href="https://github.com/ocornut/imgui/blob/0738611559b0a51c7fa0c376eb9601587231f841/misc/fonts/binary_to_compressed_c.cpp"&gt;将 binary 转换为 C array 的工具&lt;/a&gt;。如果软件只是使用拉丁字集的话，文件不大应该也没什么问题，我打算汉化的软件本身用的也是这个解决方案，但将中文字集转换为 C Array 的话大小至少是西文字集的几千倍吧。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-cpp" data-lang="cpp"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ImGuiIO&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt; io &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ImGui&lt;span style="color:#f92672"&gt;::&lt;/span&gt;GetIO();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;IMFont&lt;span style="color:#f92672"&gt;*&lt;/span&gt; ttf_font &lt;span style="color:#f92672"&gt;=&lt;/span&gt; io.Fonts&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;AddFontFromFileTTF(&lt;span style="color:#e6db74"&gt;&amp;#34;res/simhei.ttf&amp;#34;&lt;/span&gt;, &lt;span style="color:#ae81ff"&gt;16.0f&lt;/span&gt;, Null, io.Fonts&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;GetGlyphRangesChinese());
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;IMFont&lt;span style="color:#f92672"&gt;*&lt;/span&gt; compressed_font &lt;span style="color:#f92672"&gt;=&lt;/span&gt; io.Fonts&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;AddFontFromMemoryCompressedTTF(SimHei_compressed_data,SimHei_compressed_size, &lt;span style="color:#ae81ff"&gt;16.f&lt;/span&gt;, Null, io.Fonts&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;GetGlyphRangesChinese());
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这里解释一下，&lt;code&gt;GetGlyphRangesChinese()&lt;/code&gt; 用来指定加载字符集，我需要改动的软件基于 IMGUI 1.4，所以只有这个方法，在更新的版本中，这个被加载常用汉字的&lt;code&gt;GetGlyphRangesChineseSimplifiedCommon()&lt;/code&gt;和加载所有汉字的&lt;code&gt;GetGlyphRangesChineseFull()&lt;/code&gt;所取代。&lt;/p&gt;
&lt;!--truncate--&gt;
&lt;h2 id="汉字编码"&gt;汉字编码&lt;/h2&gt;
&lt;p&gt;如果是 c++11，直接给中文字符串添加&lt;code&gt;u8&lt;/code&gt;前缀就可以了，源代码本身应该也是&lt;code&gt;UTF-8&lt;/code&gt;。之前的版本可以上网找个转换函数复制下来用。&lt;/p&gt;
&lt;h2 id="调整-oversampling-配置"&gt;调整 OverSampling 配置&lt;/h2&gt;
&lt;p&gt;参考 &lt;a href="https://github.com/ocornut/imgui/issues/1434#issuecomment-344205472"&gt;Github 上的这个 Issue&lt;/a&gt;。之前提到过中文字集特别占内存，而 IMGUI 的字体基于 FontAlas，至少在我这个版本（1.4）中不能动态加载，所以可能编译跑起来之后发现满屏黑白方块。&lt;/p&gt;
&lt;p&gt;在作者提供的解决办法中，其中看起来最简单粗暴的方法是减少 OverSampling。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-cpp" data-lang="cpp"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ImFontConfig config_words;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;config_words.OversampleV &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;config_words.OversampleH &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// 默认为3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;font_14 &lt;span style="color:#f92672"&gt;=&lt;/span&gt; io.Fonts&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;AddFontFromMemoryCompressedTTF(SimHei_compressed_data,SimHei_compressed_size, &lt;span style="color:#ae81ff"&gt;16.f&lt;/span&gt;, &lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;config_words, io.Fonts&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;GetGlyphRangesChinese());
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;除此之外还可以请求 Alpha Texture （超出我能力范围了 QvQ）或者手动缩小&lt;code&gt;glyphRange&lt;/code&gt;，只保留自己用到的字符。&lt;/p&gt;</description></item><item><title>利用 IFTTT 将 Toggl Report 发送到 Telegram Channel</title><link>https://sheronw.xyz/posts/2020-04-13-ifttt_toggl_telegram/</link><pubDate>Mon, 13 Apr 2020 00:00:00 +0000</pubDate><guid>https://sheronw.xyz/posts/2020-04-13-ifttt_toggl_telegram/</guid><description>&lt;p&gt;【2020.11.5 更新】趣闻一则：因为 star 了 Toggl API，被一个英国的独立开发者发了 cold email，于是就花了十分钟在 zoom 上和他聊了聊，老哥似乎是想做一个使用类似 Toggl 这样的工具收集数据，然后用机器学习分析码农生产力的产品。&lt;/p&gt;
&lt;p&gt;【2020.9.25 更新】现在 IFTTT 开始付费，感觉不值，散了吧散了吧（虽然 Toggl Report 的获取依然可以参考）。&lt;/p&gt;
&lt;h2 id="主要思路"&gt;主要思路&lt;/h2&gt;
&lt;p&gt;&lt;del&gt;生写一个 Telegram Bot 也不是不行但我就是想找借口玩 IFTTT&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;VPS 或树莓派：写一个自动化的程序并定时运行，从 Toggl Report API 获取数据，整理之后 Post 给 IFTTT 的 Webhook。&lt;/p&gt;
&lt;p&gt;IFTTT：&lt;code&gt;if&lt;/code&gt; 收到服务器端的 Post &lt;code&gt;then&lt;/code&gt; 发消息到 Telegram 指定 chat&lt;/p&gt;
&lt;p&gt;Telegram：利用&lt;a href="https://t.me/IFTTT"&gt;@IFTTT&lt;/a&gt;实现 IFTTT 与 Telegram 的联动&lt;/p&gt;
&lt;p&gt;本记录使用的是目前的 Toggl API v8 以及 Toggl Report API v2。&lt;/p&gt;
&lt;!--truncate--&gt;
&lt;h2 id="获取-toggl-api-token-及-workspace-id"&gt;获取 Toggl API Token 及 Workspace ID&lt;/h2&gt;
&lt;p&gt;登录 Toggl 网页版，进入&lt;code&gt;Profile Settings&lt;/code&gt;页面翻到下面有自己的&lt;code&gt;api_token&lt;/code&gt;，把这玩意儿记下来待会儿用。切换到自己想要获取 Report 的 Workspace，点 Settings，把地址栏中&lt;code&gt;https://toggl.com/app/{workspace_id}/settings/general&lt;/code&gt;的&lt;code&gt;workspace_id&lt;/code&gt;记下来。&lt;/p&gt;</description></item></channel></rss>