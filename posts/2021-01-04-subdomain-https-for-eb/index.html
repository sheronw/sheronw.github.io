<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Assign a Subdomain to Elastic Beanstalk and Enable HTTPS | シャロン</title>
<meta property="og:title" content="Assign a Subdomain to Elastic Beanstalk and Enable HTTPS | シャロン"><meta property="og:description" content=" To enable HTTPS (easily), make sure you created one Elastic Beanstalk environment with Load Balancer option."><meta property="og:url" content="https://sheronw.xyz/posts/2021-01-04-subdomain-https-for-eb/"><meta property="og:image" content="https://sheronw.xyz/avatar.png"><link rel=stylesheet href=/css/main.min.f0c8ce02ddbec47f4d94fb71d63457fbc8b472346ef24fcd73ee6375779fb4b6.css integrity="sha256-8MjOAt2+xH9NlPtx1jRX+8i0cjRu8k/Nc+5jdXeftLY=" crossorigin=anonymous><script src=/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js integrity="sha256-I80MfYNyY7nq65buLZzPopadqj+gD6HB/ocBqbhyUaE=" crossorigin=anonymous></script></head><body><div class=wrap><div class=flex><header><a href=/><img src=/avatar.png></a>
<class id=header-inner><h1 id=site-title>シャロン</h1><nav><ul><li><img src=/nav.gif>
<a href=/>主页</a></li><li><img src=/nav.gif>
<a aria-current=true class=ancestor href=/posts/>文章</a></li><li><img src=/nav.gif>
<a href=/tags/>标签</a></li><li><img src=/nav.gif>
<a href=/aboutme/>关于</a></li></ul></nav></class></header><div class=right><main><h1>Assign a Subdomain to Elastic Beanstalk and Enable HTTPS</h1><p>Time published:
<time datetime=2021-01-04T00:00:00+00:00>January 4, 2021</time></p><blockquote><p>To enable HTTPS (easily), make sure you created one Elastic Beanstalk environment with Load Balancer option.</p></blockquote><h2 id=create-hosted-zone>Create Hosted Zone</h2><ul><li>find Route 53 in AWS console</li><li>choose <code>hosted zones</code> on the left</li><li>click <code>create hosted zone</code></li><li>write your <code>subdomain.example.com</code> as domain name, choose <code>public hosted zone</code> and then click <code>create hosted zone</code></li></ul><h2 id=edit-ttl-optional-for-testing>Edit TTL (optional for testing)</h2><ul><li>find the NS record in this hosted zone, select and click <code>edit</code></li><li>change TTL to some value like 900 (15 min), by default the value is 172800 (2 days)</li></ul><h2 id=add-alias-resource-record>Add Alias Resource Record</h2><ul><li>click <code>create record</code> in this hosted zone</li><li>just leave blank for <code>record name</code></li><li>enable <code>alias</code> and assign <code>route traffic to</code> as your elastic beanstalk application</li><li>click <code>create</code></li></ul><h2 id=add-ns-records-for-the-subdomain>Add NS Records for the Subdomain</h2><ul><li>go to your domain provider and find the place to add records, for example, in Google Domains, go to <code>DNS</code> and find <code>custom resource records</code> section</li><li>copy and paste the NS record in the hosted zone that you created just now, for example, in Google Domains, name should be <code>subdomain</code> (some providers use <code>subdomain.example.com</code>), type should be <code>NS</code> and data should be the values from NS record in the hosted zone, there might be several lines of value and you could use the smaller <code>+</code> sign to add them in one record</li><li>could also set TTL to 900</li></ul><h2 id=change-ttl-back-optional>Change TTL back (optional)</h2><ul><li>if you lowered TTL for testing, don&rsquo;t forget to change them back to default value</li></ul><h2 id=request-a-certificate>Request a Certificate</h2><ul><li>go to Certificate Manager in aws</li><li>click <code>request a certificate</code>, choose <code>request a public certificate</code></li><li>type your <code>subdomain.example.com</code> and then choose DNS validation</li><li>choose to import the CNAME record into Route 53 automatically</li></ul><h2 id=load-balancer-configuration>Load Balancer Configuration</h2><ul><li>make sure you created an environment with load balancer</li><li>go to your elastic beanstalk environment</li><li>click <code>configuration</code> on the left side bar</li><li>find <code>load balancer</code> and edit</li><li>click <code>add listener</code></li><li>port is <code>443</code>, protocol is <code>HTTPS</code> and choose the previous created certificate as your ssl certificate</li><li>click <code>add</code></li></ul><div class=article-label><div>Tags:</div><ul><li><a href=/tags/%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/>折腾记录</a></li></ul></div></main></div></div><footer><p><a href=#>Back to Top</a><br>Powered by <a href=https://gohugo.io/>Hugo</a>. Copyright 2023.
All rights reserved.</p><img src=/footer.png></footer></div></body></html>